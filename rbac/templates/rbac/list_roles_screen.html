{% extends 'base.html' %}
{% load static %}
{% block title %} - RBAC Tree View (List){% endblock %}
{% block content %}

    <nav aria-label="breadcrumb" role="navigation">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="{% url "rbac:admin_menu" %}#rbac">Admin</a></li>
            <li class="breadcrumb-item active" aria-current="page">Tree List</li>
        </ol>
    </nav>

    <h1>Role Based Access Control</h1>

    <div>
        <div class="card">
            <div class="card-header card-header-primary">
                <h3 class="card-title">RBAC Details by Role</h3>
            </div>
            <div class="card-body">
                <div class="container">
                    <div class="table-responsive">
                        <table class="table table-hover">
                            <thead>
                                <tr>
                                    <th>Roles</th>
                                    <th>Group</th>
                                    <th>Members</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for role in roles %}
                                    <tr>
                                        <td id="role_{{ role.id }}" class="align-top">
                                            <span class="font-weight-bold">
                                                {{ role.role }}
                                            </span><br>
                                        </td>
                                        <td class="align-top">
                                            <ul>
                                                {% for group in role.groups %}
                                                    <li>
                                                        <a href="{% url "rbac:list_screen" %}#group_{{ group.id }}">
                                                            {{ group.name }}
                                                        </a>
                                                    </li>
                                                {% endfor %}
                                            </ul>
                                        </td>
                                        <td class="align-top">
                                            <ul>
                                                {% for member in role.members %}
                                                    <li>
                                                        <a href="{% url "rbac:list_members_screen" %}#member_{{ member.member.id }}">
                                                            {{ member.member.full_name }}
                                                        </a>
                                                    </li>
                                                {% endfor %}
                                            </ul>
                                        </td>
                                    </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>



                </div>
            </div>
        </div>
    </div>
{% endblock %}
