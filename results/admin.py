"""Generated by utils/cgit/cgit_util_generate_admin_file on 2022-05-03 08:32:37.897641"""

from django.contrib import admin

from utils.views.cobalt_django_admin import link_to_user_or_unregistered_user
from .models import ResultsFile, PlayerSummaryResult


@admin.register(ResultsFile)
class ResultsFileAdmin(admin.ModelAdmin):
    """Admin class for model ResultsFile"""

    search_fields = ("results_file",)

    autocomplete_fields = [
        "uploaded_by",
        "organisation",
    ]


@admin.register(PlayerSummaryResult)
class PlayerSummaryResultAdmin(admin.ModelAdmin):
    """Admin class for model PlayerSummaryResult"""

    autocomplete_fields = [
        "results_file",
    ]

    readonly_fields = ("linked_user",)

    def linked_user(self, instance):
        """ link to user, needs readonly_fields = ("linked_user",) added above """

        return link_to_user_or_unregistered_user(instance)

    linked_user.short_description = "Link to User"
