{% extends 'base.html' %}
{% load static %}
{% load widget_tweaks %}
{% load crispy_forms_tags %}
{% load cobalt_tags %}
{% block title %} - Admin Event Entry Player{% endblock %}

{% block content %}

    <nav aria-label="breadcrumb" role="navigation">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="{% url "events:admin_summary" congress_id=event_entry_player.event_entry.event.congress.id %}">{{ event_entry_player.event_entry.event.congress.name }}</a></li>
            <li class="breadcrumb-item"><a href="{% url "events:admin_event_summary" event_id=event_entry_player.event_entry.event.id %}">{{ event_entry_player.event_entry.event.event_name }}</a></li>
            <li class="breadcrumb-item"><a href="{% url "events:admin_evententry" evententry_id=event_entry_player.event_entry.id %}">Entry: {{ event_entry_player.event_entry.id }}</a></li>
            <li class="breadcrumb-item active" aria-current="page">Player: {{ event_entry_player.id }}</li>
        </ol>
    </nav>

    <div class="container justify-content-center">
        <div class="row h-100 d-flex justify-content-center">
            <div class="card">
                <div class="card-header card-header-warning">
                    <h2>Congress Admin View</h2>
                    <h3>{{ event_entry_player.event_entry.event.event_name }} - Player Entry</h3>
                    <h4>{{ event_entry_player.event_entry.event.congress }}</h4>
                </div>
                <div class="card-body">

                    <div class="container">
                        <div class="row">

                            <div class="card col-md-6 px-1" id="player_name">
                                {% include "events/congress_admin/event_entry_player_name_htmx.html" %}
                            </div>

                            <div class="card col-md-6 px-1">
                                <div class="card-header card-header-danger">
                                    <h3>Details</h3>
                                </div>
                                <div class="card-body">

                                    <form method="post">
                                        {% csrf_token %}
                                        <table>
                                            <tr>
                                                <td>
                                                    <label class="bmd-label-static px-5">Payment Type</label>
                                                </td>
                                                <td>
                                                    <div>

                                                        <span class="cobalt-form-error" id="id_payment_type_errors">{{ form.payment_type.errors|striptags }}</span>
                                                        {% render_field form.payment_type class+="form-control" %}
                                                    </div>
                                                </td>
                                            </tr>

                                            <tr>
                                                <td>
                                                    <label class="bmd-label-static px-5">Payment Status</label>
                                                </td>
                                                <td>
                                                    <div>

                                                        <span class="cobalt-form-error" id="id_payment_status_errors">{{ form.payment_status.errors|striptags }}</span>
                                                        {% render_field form.payment_status class+="form-control" %}
                                                    </div>
                                                </td>
                                            </tr>

                                            <tr>
                                                <td>
                                                    <label class="bmd-label-static px-5">Entry Fee Reason</label>
                                                </td>
                                                <td>
                                                    <div>
                                                        {% cobalt_bs4_field form.reason no_label=True %}
                                                    </div>
                                                </td>
                                            </tr>

                                            <tr>
                                                <td>
                                                    <label class="bmd-label-static px-5">Entry Fee</label>
                                                </td>
                                                <td>
                                                    <div>

                                                        <span class="cobalt-form-error" id="id_entry_fee_errors">{{ form.entry_fee.errors|striptags }}</span>
                                                        {% render_field form.entry_fee class+="form-control" %}
                                                    </div>
                                                </td>
                                            </tr>

                                            <tr>
                                                <td>
                                                    <label class="bmd-label-static px-5">Payment Received</label>
                                                </td>
                                                <td>
                                                    <div class="form-group">

                                                        <span class="cobalt-form-error" id="id_payment_status_errors">{{ form.payment_received.errors|striptags }}</span>
                                                        {% render_field form.payment_received class+="form-control" %}
                                                    </div>
                                                </td>
                                            </tr>
                                        </table>
                                        <div class="row justify-content-center">
                                            <button type="submit" class="btn btn-success cobalt-save mx-auto">Save</button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


{% endblock %}

{% block footer %}
    <script src="{% static "assets/js/plugins/sweetalert2.js" %}"></script>
    {% include "accounts/search/user_search_include_js_htmx.html" %}
    <script>
        function changeMember(search_id, member_id){
            postData = {
                'event_entry_player_id': '{{ event_entry_player.id }}',
                'player_id': member_id,
            };
            url = '{% url "events:admin_edit_player_name_htmx" %}';
            htmx.ajax('POST', url, {'target': '#player_name', 'values': postData});
        }
    </script>
{% endblock %}
