{# This is the HTMX user search #}
{#  include it in your HTML file with an optional search_id value if you want to have more than once search or a page #}
{#  define a function called cobaltMemberSearchOk() to receive the output #}

{#  This replaces the older Javascript generic search and should be used in new work #}

{% load static %}

<script>

    // Called for any cancel event. Clear entries and hide
    function cancelLookup(){
        $(".modal-input").val("");
        $('.name-match').html("");
        $(".modal").modal('hide');
    }

    function memberSelected(ok_id){
        const search_id = ok_id.replace("id_cobalt_search_ok", "");
        const member_id = $('#results_member_id' + search_id).val();
        const member_name = $('#results_member_name' + search_id).val();
        // call cancel to tidy up
        cancelLookup();
        // call the callback function in the main code
        cobaltMemberSearchOk(search_id, member_id, member_name);
    }
</script>