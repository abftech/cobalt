{#------------------------------------------------------------------------#}
{#                                                                        #}
{# Show totals for the session tab. Updates when the data changes         #}
{#                                                                        #}
{#------------------------------------------------------------------------#}

<!-- MAIN CARD -->
<div class="card">

    <div class="card-body">

        <!-- WIZARD STEPS -->
        <!-- We are automatically finished step 1, or we don't see this screen. We can't control step 2, so the only -->
        <!-- steps we worry about are 3-5. -->

        <div class="steps-form">
            <div class="steps-row setup-panel">

                <!-- STEP 1 - LOAD DATA - ALWAYS SET -->
                <div class="steps-step">
                    <span class="btn btn-circle btn-primary">1</span>
                    <p>Load Data</p>
                </div>

                <!-- STEP 2 - ADJUST SETTINGS - NEVER GETS SET - WE DON'T KNOW IF IT HAPPENS, USE HIGHER STATUS TO CHECK -->
                <div class="steps-step">
                    <span class="btn btn-circle
                        {% if session.status == "BC" or session.status == "OS" or session.status == "CO" %}
                            btn-primary
                        {% endif %}
                        ">2</span>
                    <p>Adjust settings (optional)</p>
                </div>

                <!-- STEP 3 - PROCESS BRIDGE CREDITS -->
                <div class="steps-step">
                    <span class="btn btn-circle
                        {% if session.status == "BC" or session.status == "OS" or session.status == "CO" %}
                            btn-primary
                        {% endif %}
                        ">3</span>
                    <p>Process {{ BRIDGE_CREDITS }}</p>
                </div>

                <!-- STEP 4 - PROCESS OFF SYSTEM PAYMENTS -->
                <div class="steps-step">
                    <span class="btn btn-circle
                        {% if session.status == "OS" or session.status == "CO" %}
                            btn-primary
                        {% endif %}
                        ">4</span>
                    <p>Process Off-System Payments</p>
                </div>

                <!-- STEP 5 - COMPLETE -->
                <div class="steps-step">
                    <span class="btn btn-circle
                        {% if session.status == "CO" %}
                            btn-primary
                        {% endif %}
                        ">5</span>
                    <p>Complete</p>
                </div>
            </div>
        </div>

        {#        <!-- PROGRESS ANIMATION -->#}
        {#        <h3 class="text-center pb-0 mb-1">Progress</h3>#}
        {#        <div class="animated-progress progress-{{ progress_colour }} mx-auto pt-0 mt-0">#}
        {#            <span data-progress="{{ progress_percent }}"></span>#}
        {#        </div>#}
        {##}
        {#        <!-- TABLE OF STATS -->#}
        {#        <div class="col-md-6 col-lg-4 mx-auto pb-5">#}
        {#            <table class="table border table-condensed table-striped">#}
        {#                <thead class="thead-dark">#}
        {#                    <tr>#}
        {#                        <th colspan="2" class="text-center">Stats</th>#}
        {#                    </tr>#}
        {#                </thead>#}
        {#                <tbody>#}
        {#                    <tr>#}
        {#                        <td class="text-left">Tables</td>#}
        {#                        <td class="text-right">{{ totals.tables }}</td>#}
        {#                    </tr>#}
        {#                    <tr>#}
        {#                        <td class="text-left">{{  BRIDGE_CREDITS }} Due</td>#}
        {#                        <td class="text-right">{{ totals.bridge_credits_due }}</td>#}
        {#                    </tr>#}
        {#                    {% if totals.unknown_payment_methods %}#}
        {#                        <tr>#}
        {#                            <td class="text-left">Unknown Payment Types</td>#}
        {#                            <td class="text-right">{{ totals.unknown_payment_methods }}</td>#}
        {#                        </tr>#}
        {#                    {% endif %}#}
        {#                    <tr>#}
        {#                        <td class="text-left">{{  BRIDGE_CREDITS }} Received</td>#}
        {#                        <td class="text-right">{{ totals.bridge_credits_received }}</td>#}
        {#                    </tr>#}
        {#                    <tr>#}
        {#                        <td class="text-left">Off System Payments Due</td>#}
        {#                        <td class="text-right">{{ totals.other_methods_due }}</td>#}
        {#                    </tr>#}
        {#                    <tr>#}
        {#                        <td class="text-left">Off System Payments Received</td>#}
        {#                        <td class="text-right">{{ totals.other_methods_received }}</td>#}
        {#                    </tr>#}
        {#                </tbody>#}
        {#            </table>#}
        {#        </div>#}


        <!-- NEXT STEPS -->

        {% if session.status == "LD" %}

            <div class="card mx-auto col-md-6">
                <div class="card-header card-header-rose py-0">
                    <h3>Next Steps</h3>
                </div>
                <div class="card-body">

                    <dl>
                        <dt>2) Adjust settings for this session, or individuals (OPTIONAL)</dt>
                        <dd>If you want to do anything unusual you can use the settings tab above to change things for this
                            session, or from the detail view you can change things for individuals such as their payment method.
                            Usually, you can skips this step.</dd>
                        <dt>3) Process {{ BRIDGE_CREDITS }}</dt>
                        <dd>Click the button below to process the {{ BRIDGE_CREDITS }} for players who are able to pay
                            using this method.</dd>
                    </dl>
                    <div class="col text-center">
                        <button
                            class="btn btn-info mx-auto"
                            hx-post="{% url "club_sessions:process_bridge_credits_htmx" %}"
                            hx-vars="club_id:{{ club.id }}, session_id:{{ session.id }}"
                            hx-target="#id_pane_session"
                        >
                            Process {{ BRIDGE_CREDITS }}
                        </button>
                    </div>
                </div>

            </div>

        {% endif %}
    </div>
</div>
{##}
{#<script>#}
{#    $(document).ready( function () {#}
{##}
{#        // Show animation for the progress bar#}
{#        $(".animated-progress span").each(function () {#}
{#            $(this).animate(#}
{#                {#}
{#                    width: $(this).attr("data-progress") + "%",#}
{#                },#}
{#                1000#}
{#            );#}
{#            $(this).text($(this).attr("data-progress") + "%");#}
{#        });#}
{##}
{#    });#}
{#</script>#}

