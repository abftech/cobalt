{#------------------------------------------------------------------------#}
{#                                                                        #}
{# Handles importing session data                                         #}
{#                                                                        #}
{#------------------------------------------------------------------------#}
{% if existing_data %}
    <h4>There is existing session data. Importing will replace this.</h4>
{% endif %}
<div>
    <span class="btn btn-warning btn-file">
        Import Session Names (Generic CSV)
        <input
            type="file" name="file"
            id="id_upload_results_file_btn"
            hx-encoding='multipart/form-data'
            hx-post="{% url "club_sessions:session_import_file_upload_htmx" %}"
            hx-vars="club_id:{{ club.id }},session_id:{{ session.id }},generic_csv:1"
            hx-target="#id_pane_import"
            hx-trigger="change"
            hx-indicator=".htmx-indicator"
            hx-confirm="This will delete the existing data. Are you sure?"
        />
    </span>
</div>

<div>
    <span class="btn btn-warning btn-file">
        Import Session Names (Compscore2)
        <input
            type="file" name="file"
            id="id_upload_results_file_btn"
            hx-encoding='multipart/form-data'
            hx-post="{% url "club_sessions:session_import_file_upload_htmx" %}"
            hx-vars="club_id:{{ club.id }},session_id:{{ session.id }},compscore2:1"
            hx-target="#id_pane_import"
            hx-trigger="change"
            hx-indicator=".htmx-indicator"
            hx-confirm="This will delete the existing data. Are you sure?"
        />
    </span>
</div>


{% if messages %}
    <h4>Import Messages</h4>
    <ul>
        {% for message in messages %}
            <li>{{ message }}</li>
        {% endfor %}
    </ul>
{% else %}
    {# if no messages and this is a reload (button pressed) go straight to the session tab #}
    {% if reload %}
        <script>
            $(document).ready( function () {
                // reload data on session tab
                htmx.trigger(htmx.find('#id_pane_session'), "tab_load_event");
                // move to session tab
                $('#id_menu li:eq(2) a').tab('show');

            });
        </script>
    {% endif %}
{% endif %}
