<div id="loading_message" style="display: none">
    <h3>Loading...</h3>
</div>

{% if existing_data %}
    <h4>There is existing session data. Importing will replace this.</h4>
{% endif %}

<form
    hx-encoding='multipart/form-data'
    hx-post="{% url "club_sessions:session_import_file_upload_htmx" %}"
    hx-vars="club_id:{{ club.id }},session_id:{{ session.id }},generic_csv:1"
    hx-target="#id_pane_import"
    hx-trigger="change"
    id="import_file_form"
>
    <div class="fileinput fileinput-new text-center" data-provides="fileinput" style="cursor: pointer;">
        <div class="fileinput-preview fileinput-exists thumbnail img-circle img-raised"></div>
        <div>
            <span class="btn btn-warning btn-file">
                <span class="fileinput-new">Import Session Names (Generic CSV)</span>
                <input type="file" name="file" id="id_upload_results_file_btn"/>
            </span>

        </div>
    </div>
</form>

<form
    hx-encoding='multipart/form-data'
    hx-post="{% url "club_sessions:session_import_file_upload_htmx" %}"
    hx-vars="club_id:{{ club.id }},session_id:{{ session.id }},compscore2:1"
    hx-target="#id_pane_import"
    hx-trigger="change"
    id="import_file_form"
>
    <div class="fileinput fileinput-new text-center" data-provides="fileinput" style="cursor: pointer;">
        <div class="fileinput-preview fileinput-exists thumbnail img-circle img-raised"></div>
        <div>
            <span class="btn btn-warning btn-file">
                <span class="fileinput-new">Import Session Names (CS2)</span>
                <input type="file"
                    name="file"
                    id="id_upload_results_file_btn"
                    _="on click show #loading_message"
                />
            </span>

        </div>
    </div>
</form>


{% if messages %}
    <h4>Import Messages</h4>
    <ul>
        {% for message in messages %}
            <li>{{ message }}</li>
        {% endfor %}
    </ul>
{% else %}
    {# if no messages and this is a relads (button pressed) go straight to the session tab #}
    {% if reload %}
        <script>
            $(document).ready( function () {
                // reload data on session tab
                htmx.trigger(htmx.find('#id_pane_session'), "tab_load_event");
                // move to session tab
                $('#id_menu li:eq(2) a').tab('show');

            });
        </script>
    {% endif %}
{% endif %}
