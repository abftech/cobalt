{#------------------------------------------------------------------------#}
{#                                                                        #}
{# Session View - Table View                                              #}
{#                                                                        #}
{# Show the data more visually with icons for tables                      #}
{#                                                                        #}
{#------------------------------------------------------------------------#}
{% load cobalt_tags %}
{% load static %}

<!-- MESSAGE -->
<h3 class="text-primary font-weight-bold">{{ message }}</h3>

{% if not session_entries %}

    <h4>No players found. Click below to add a table manually.</h4>

{% else %}

    <button
        class="btn btn-info"
        hx-post="{% url "club_sessions:process_bridge_credits_htmx" %}"
        hx-vars="club_id:{{ club.id }}, session_id:{{ session.id }}"
        hx-target="#id_pane_session"
    >
        Process {{ BRIDGE_CREDITS }}
    </button>

    <div class="container-fluid" id="tables_list">
        <div class="row">
            {% for table_no, players in table_list.items %}
                <div class="col-4" style="width: 200px; height: 200px">

                    <div class="container">
                        <!-- NORTH - FULL ROW -->
                        <div class="row">
                            <div class="col-12 text-center">
                                <div class="mx-auto">
                                    <span
                                        title="{{ players.0.player.full_name }}"
                                        data-toggle="tooltip"
                                    >
                                        {{ players.0.player.first_name }}
                                    </span>
                                </div>
                            </div>
                        </div>

                        <!-- EAST/WEST AND TABLE PICTURE -->
                        <div class="row">

                            <!-- WEST -->
                            <div class="col-4 text-right align-self-center px-0 bx-0 mx-0">
                                <div
                                    class="px-0 bx-0 mx-0"
                                    title="{{ players.2.player.full_name }}"
                                    data-toggle="tooltip"
                                >
                                    {{ players.2.player.first_name }}
                                </div>
                            </div>

                            <!-- TABLE ICON -->
                            <div class="col-4">
                                <span
                                    class="text-center"
                                    style="font-size:large; width: 80px; height: 80px; background-color: darkgreen; display:inline-block; color: white"
                                >
                                    Table {{ table_no }}
                                    <span class="material-icons">done</span>
                                </span>
                            </div>

                            <!-- EAST -->
                            <div class="col-4 text-left align-self-center px-0 bx-0 mx-0">
                                <div
                                    class="px-0 bx-0 mx-0"
                                    title="{{ players.3.player.full_name }}"
                                    data-toggle="tooltip"
                                >
                                    {{ players.3.player.first_name }}
                                </div>
                            </div>
                        </div>


                        <!-- SOUTH - FULL ROW -->
                        <div class="row">
                            <div class="col-12 text-center">
                                <div class="mx-auto">
                                    <span
                                        title="{{ players.1.player.full_name }}"
                                        data-toggle="tooltip"
                                    >
                                        {{ players.1.player.first_name }}
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>



                </div>
            {% endfor %}
        </div>

    </div>


{% endif %}

<!-- ADD TABLE BUTTON -->
<button
    class="btn btn-info"
    hx-post="{% url "club_sessions:add_table_htmx" %}"
    hx-vars="club_id:{{ club.id }}, session_id:{{ session.id }}"
    hx-target="#id_pane_session"
>Add Table</button>

<script>
    $(document).ready(function () {

        // init tooltips
        $('[data-toggle="tooltip"]').tooltip();

    });
</script>

